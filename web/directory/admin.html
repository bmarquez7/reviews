<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Inbox</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body class="admin-page">
    <header class="topbar">
      <div class="brand">
        <a class="brand-home" href="./embed.html" aria-label="Back to directory">
          <img class="brand-logo" src="./assets/new-roots-logo.png" alt="New Roots Albania" />
        </a>
        <h1>Admin Inbox</h1>
      </div>
      <div class="actions compact">
        <a class="chip link-chip" href="./embed.html">Directory</a>
        <button id="adminLogout" type="button">Logout</button>
      </div>
    </header>

    <main class="layout admin-layout">
      <section class="card admin-sidebar">
        <h2>Folders</h2>
        <div id="adminCategories" class="list small"></div>
      </section>

      <div class="admin-right-stack">
        <section class="card admin-list">
          <div class="row between center">
            <h2>Tasks</h2>
            <span id="adminTierPill" class="chip">Tier: -</span>
          </div>
          <div class="row gap-sm">
            <input id="adminSearch" type="text" placeholder="Search requests..." />
            <select id="adminStatusFilter">
              <option value="all">All statuses</option>
              <option value="submitted">Submitted</option>
              <option value="under_review">Under review</option>
              <option value="resolved">Resolved</option>
              <option value="rejected">Rejected</option>
            </select>
          </div>
          <div id="adminTaskList" class="list small"></div>

          <div class="admin-business-tools">
            <h3>Business Task Search</h3>
            <div class="row gap-sm">
              <input id="adminBusinessSearch" type="text" placeholder="Search businesses for management tasks..." />
            </div>
            <div id="adminBusinessResults" class="list small"></div>
            <div id="adminBusinessEditor" class="hidden">
              <h3>Selected Business</h3>
              <input id="adminBizId" type="text" readonly />
              <input id="adminBizName" type="text" placeholder="Business name" />
              <input id="adminBizOwnerName" type="text" placeholder="Owner name" />
              <input id="adminBizDescription" type="text" placeholder="Description" />
              <input id="adminBizMission" type="text" placeholder="Mission statement" />
              <input id="adminBizPhone" type="text" placeholder="Primary phone" />
              <input id="adminBizEmail" type="email" placeholder="Primary email" />
              <input id="adminBizWebsite" type="text" placeholder="Website URL" />
              <input id="adminBizFacebook" type="text" placeholder="Facebook URL" />
              <input id="adminBizInstagram" type="text" placeholder="Instagram URL" />
              <input id="adminBizTiktok" type="text" placeholder="TikTok URL" />
              <input id="adminBizLinkedin" type="text" placeholder="LinkedIn URL" />
              <input id="adminBizYoutube" type="text" placeholder="YouTube URL" />
              <input id="adminBizOther" type="text" placeholder="Other social URL" />
              <input id="adminBizFoundedYear" type="number" min="1800" max="2100" placeholder="Founded year" />
              <div class="actions">
                <button id="adminBizSave" type="button">Save Business</button>
                <button id="adminBizRemove" type="button">Remove Business</button>
              </div>
              <h3>Add Location</h3>
              <form id="adminAddLocationForm" class="grid2">
                <input id="adminLocName" type="text" placeholder="Location name" />
                <input id="adminLocAddress" type="text" placeholder="Address line" />
                <input id="adminLocCity" type="text" placeholder="City" />
                <input id="adminLocRegion" type="text" placeholder="Region" />
                <input id="adminLocCountry" type="text" placeholder="Country" value="Albania" />
                <input id="adminLocPhone" type="text" placeholder="Location phone" />
                <input id="adminLocEmail" type="email" placeholder="Location email" />
                <textarea id="adminLocHours" placeholder='Hours JSON e.g. {"mon":"9-18","tue":"9-18"}'></textarea>
                <button type="submit">Add Location</button>
              </form>
              <h3>Locations</h3>
              <div id="adminBizLocations" class="list small"></div>
              <h3>Batch Images</h3>
              <form id="adminBizImageForm" class="grid2">
                <input id="adminBizImages" type="file" accept="image/*" multiple />
                <button type="submit">Upload Business Images</button>
              </form>
            </div>
            <div class="admin-user-tools">
              <h3>Users</h3>
              <div class="row gap-sm">
                <input id="adminUserSearch" type="text" placeholder="Search users by email..." />
                <select id="adminUserRoleFilter">
                  <option value="">All roles</option>
                  <option value="consumer">consumer</option>
                  <option value="business_owner">business_owner</option>
                  <option value="moderator">admin</option>
                  <option value="admin">super_admin</option>
                </select>
                <select id="adminUserStatusFilter">
                  <option value="">All status</option>
                  <option value="active">active</option>
                  <option value="suspended">suspended</option>
                </select>
                <select id="adminUserSort">
                  <option value="newest">Newest</option>
                  <option value="email">Email A-Z</option>
                  <option value="role">Role</option>
                </select>
              </div>
              <div id="adminUserResults" class="list small"></div>
              <form id="adminResetPasswordForm" class="grid2">
                <input id="adminResetEmail" type="email" placeholder="Email to send reset password" />
                <button type="submit">Send Password Reset</button>
              </form>
            </div>
          </div>
        </section>

        <section class="card admin-detail">
          <h2>Task Detail</h2>
          <div id="adminDetail" class="muted">Select a task to view details.</div>
          <div id="adminActions" class="actions"></div>
          <form id="adminImageBatchForm" class="grid2 hidden" style="margin-top:0.7rem;">
            <input id="adminBatchBusinessId" type="text" placeholder="Business ID" readonly />
            <input id="adminBatchImages" type="file" accept="image/*" multiple />
            <button type="submit">Batch Upload Business Images</button>
          </form>
          <form id="roleAssignForm" class="grid2 hidden" style="margin-top:0.7rem;">
            <input id="roleAssignEmail" type="email" placeholder="User email" />
            <select id="roleAssignValue">
              <option value="consumer">consumer</option>
              <option value="business_owner">business_owner</option>
              <option value="moderator">admin</option>
              <option value="admin">super_admin</option>
            </select>
            <button type="submit">Assign Role</button>
          </form>
        </section>
      </div>
    </main>

    <div id="toastHost" class="toast-host" aria-live="polite" aria-atomic="true"></div>
    <script type="module" src="./admin.js"></script>
  </body>
</html>
